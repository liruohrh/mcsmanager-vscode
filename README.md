# MCSManager VSCode Extension 🚀

在 VSCode 中使用 MCSManager，让服务器管理更轻松！

## ✨ 功能特性

### 🔑 实例管理
- ✅ 实例列表查看
- ✅ 用户登录与登出
- ✅ 配置文件快速打开
- ✅复制实例信息
- [ ] 优化登录性能
- [ ] 使用 VSCode 内置认证方式authentication

### 📁 文件管理
- ✅实例的文件列表

- ✅双击文件item在编辑器打开文件

  - 为什么双击：这样可以不会影响其他操作，如快捷键，当点击打开，F2重命名文件就很难，Ctrl+X剪切也很难
    - 双击设置在300ms间隔内（我自己认为的合适值）

  - 压缩文件只能下载，无法在编辑器打开
  - ✅ 文件缓存支持：缓存目录结构以及打开过的文件内容
    - ✅ 支持强制刷新根目录、目录、文件（更新内容）
      - 如果是刷新目录，会在关闭编辑器的相关的文件，且让用户自行选择是否重新打开
      - [ ] 支持F5刷新根目录 或者 选中的目录或者文件

- ✅保存文件会自动上传

- view title按钮

  - ✅刷新根目录
  - ✅批量选中删除

- 右键菜单

  - ✅创建文件、目录
    - 在根目录下的文件右键才会上传到根目录
    - [ ] 使用一个菜单操作，先弹出选择框（创建文件、目录、或者是自己写全路径的文件、目录），再弹出输入框输入文件名或者路径


  - ✅删除单个文件

  - ✅文件上传
    - 在根目录下的文件右键才会上传到根目录
  - ✅文件下载
    - 目前仅支持下载文件
    - [ ] 下载目录自动压缩下载

  - ✅重命名
    - ✅支持快捷键F2

  - ✅复制/粘贴操作
    - ✅支持快捷键Ctrl + c、v


  - ✅剪切/粘贴
    - ✅支持快捷键Ctrl + x、v
  - ✅刷新文件/目录
- ✅文件移动（拖拽实现）
  - ✅拖拽到文件会弹出提示是否移动到其目录
- ✅  ai、智能提示在虚拟文件的有效性
- ✅复制文件路径
- [ ] 撤销操作支持（如撤销复制、移动）

### 💼 工作区集成
- ✅File Explorer view title按钮，点击以虚拟工作区打开

### 编辑器集成

- ✅ 标题菜单文件上传（需预选目录，默认根目录）

## 🚨 注意事项

1. **操作提示**

   - vscode

     - 点击是选中tree item（在文件列表里就是一个文件或者目录，背景变灰色），右键只是菜单（边框变蓝色）
       - ctrl+多点击，按ESC会取消选中，但是会呈现右键菜单最后一个的状态（但是又没有显示出菜单，只是item有其状态颜色），再按ESC会取消这个半右键菜单状态
     - 点击tree item后，聚焦其他地方（点击其他地方），不会取消选中，除非再次单击任意一个tree item（会重新选中这个新tree item） 或者 右键再2次ESC 或者 ctrl+点击+一次ESC
       - 注意这个，避免操作失误（只要注意tree item颜色即可）
     - 右键显示菜单不会取消选中tree item

     

   - 重新打开工作目录后，若文件显示打开失败，请等待文件列表加载完成后重试

   - 快捷键：一但不显示文件管理器，就需要重新选择，防止误操作

2. **性能考虑**

   - 批量移动/删除文件会逐个执行，不建议在工作区进行大量文件操作

## 🔄 其他更新计划

- [ ] 统一提示文本语言（改为全英文）
- [ ] 文件操作目标支持父目录选择
- [ ] 实例切换时清空文件系统
- [ ] 退出登录时清理所有数据
- [ ] 优化刷新机制

- [ ] 自定义空视图
- [x] 设置命令在命令菜单出现的条件，应该都禁止出现
  - [x] 文件管理器只需要mcsManager.hasSelectedInstance，而实例管理只需要 mcsManager.isLoggedIn
